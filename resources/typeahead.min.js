/*!
	Typeahead search v0.2.1
*/
!function(e){void 0===e.TypeAhead&&(e.TypeAhead=new function(){return this.version="0.2.1",this.init=function(e,t){return new function(e,t){if(t||(t={}),"string"==typeof e&&(e=document.querySelector(e)),!e)return console.warn("No valid element provided"),this;var n,i,r,a=this,o={},s=t.items||[];function l(e){e.preventDefault(),e.stopPropagation(),u(this.getAttribute("data-id"))}function d(){return n?n.querySelectorAll("li"):[]}function u(i){i&&(s[i].__label&&(e.value=s[i].__label),a.input=e,"function"==typeof t.process?t.process.call(a,s[i]):console.log(s[i])),n&&(n.innerHTML="")}function f(){for(var e=d(),t=0;t<e.length;t++)if("true"==e[t].getAttribute("aria-selected"))return u(e[t].getAttribute("data-id"))}return window.addEventListener("resize",function(){r&&(r.style.width="",r.style.width=e.offsetWidth)}),this.update=function(){var t=document.createEvent("HTMLEvents");return t.initEvent("keyup",!1,!0),e.dispatchEvent(t),this},this.on=function(u,c,p){return e?("change"==u?(o[u]||(o[u]=[],e.addEventListener("keyup",function(c){c.preventDefault(),c.stopPropagation(),40==c.keyCode||38==c.keyCode?function(e){for(var t,n,i,r=d(),a=-1,o=0;o<r.length;o++)"true"==r[o].getAttribute("aria-selected")&&(a=o);t=a,40==e?a++:a--,a<0&&(a=r.length-1),a>=r.length&&(a=0),t>=0&&r[t].setAttribute("aria-selected","false"),r[a]&&(r[a].setAttribute("aria-selected","true"),n=r[a].getBoundingClientRect(),i=r[a].parentNode.parentNode.getBoundingClientRect(),r[a].parentNode.parentNode.scrollTop=r[a].parentNode.parentNode.scrollTop+(n.top-i.top)-i.height/2+n.height/2)}(c.keyCode):13==c.keyCode?f():(function(u,f,c){var p,h,y,v,b,g,m;if(v=u.toUpperCase(),y=[],v){for(h=0;h<s.length;h++)g={rank:0,key:h,value:s[h]},"function"==typeof t.rank?g.rank=t.rank(s[h],u):(0==s[h].toUpperCase().indexOf(v)&&(g.rank+=3),s[h].toUpperCase().indexOf(v)>0&&(g.rank+=1)),y.push(g);y=function(e,t){return e.sort(function(e,n){return e[t]<n[t]?1:-1})}(y,"rank")}if(n||(e.parentElement.style.position="relative",(n=document.createElement("div")).classList.add("typeahead-results"),r.style.width=e.offsetWidth,i.style.position="relative",e.insertAdjacentElement("afterend",n)),b="",y.length>0){for(p="number"==typeof t.max?Math.min(y.length,t.max):y.length,b='<ol id="'+e.id+'_listbox" aria-labelledby="'+e.id+'" role="listbox">',h=0;h<p;h++)y[h].rank>0&&(b+='<li role="option" data-id="'+y[h].key+'" aria-selected="false" tabindex="-1"'+("function"==typeof t.setClass?' class="'+t.setClass(s[y[h].key])+'"':"")+">"+("function"==typeof t.render?t.render(s[y[h].key]):s[y[h].key])+"</li>");b+="</ol>"}b+='<span id="'+e.id+'_assistiveHint" style="display:none">When autocomplete results are available use up and down arrows to review, and enter to select.</span>',e&&(e.setAttribute("aria-expanded",y.length>0?"true":"false"),e.setAttribute("aria-controls",e.id+"_listbox"),e.setAttribute("aria-describedby",e.id+"_assistiveHint")),n.innerHTML=b,n.style.display=p>0?"":"hidden";var k=d();for(h=0;h<k.length;h++)k[h].addEventListener("click",l);if(o[c])for(f._typeahead=a,h=0;h<o[c].length;h++)m=o[c][h],f.data=m.data||{},"function"==typeof m.fn&&m.fn.call(m.data.this||this,f)}(this.value,c,u),"function"==typeof t.endsearch&&t.endsearch(this.value))}),e.addEventListener("blur",function(e){"function"==typeof t.blur&&t.blur()})),o[u].push({fn:p,data:c})):console.warn("No event of type "+u),this):(console.warn("Unable to attach event "+u),this)},this.trigger=function(t,n){return"string"==typeof t&&"function"==typeof e[t]?e[t]():(n||(n="string"==typeof t?new Event(t,{bubbles:!0}):t),e.dispatchEvent(n)),this},this.off=function(e,t){if(o[e])for(var n=0;n<o[e].length;n++)o[e][n].fn==t&&o[e].splice(n,1)},e.form&&(i=e.form).addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation(),f()},!1),e&&((r=function(e,t){var n=document.createElement(t);return e.replaceWith(n),n.appendChild(e),n}(e,"div")).classList.add("typeahead-wrapper"),e.setAttribute("role","combobox"),e.setAttribute("autocomplete","off"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-expanded","false")),this.addItems=function(e){s||(s=[]);for(var n=0;n<e.length;n++)e[n].__label="function"==typeof t.render?t.render(e[n]):e[n];s=s.concat(e)},this.clearItems=function(){s=[]},this.on("change",{},function(e){}),this}(e,t)},this})}(window||this);